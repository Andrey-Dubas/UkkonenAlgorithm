!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";function n(t){return function(){t.split_node_callback(...arguments)}}function i(t){return function(){t.add_node_callback(...arguments)}}r.r(e);class o{constructor(...t){void 0===constructor.num&&(constructor.num=1),this.children=[],this.parent=null,this.name=(++constructor.num).toString(10),this.x=-1,this.y=-1,this.algo_node=null;for(let e=0;e<t.length;++e)this.addChild(t[e])}edgeInfo(){return null!==this.algo_node?this.algo_node.nodeText():"undef"}addChild(t){t.parent=this,this.children.push(t)}split_node_callback(t,e,r,a){r.algo.text;let d=new o;r.add_node_callback=i(d),r.split_node_callback=n(d),d.algo_node=r,r.__graph_node=d;for(let t of this.children)d.addChild(t);this.children=[],this.addChild(d);let s=new o;a.add_node_callback=i(s),a.split_node_callback=n(s),this.addChild(s),s.algo_node=a,a.__graph_node=s}add_node_callback(t,e){let r=new o;e.add_node_callback=i(r),e.split_node_callback=n(r),this.addChild(r),r.algo_node=e}}function a(t){t.name;if(null===t.parent)return null;let e=0;do{var r=t.parent,n=r.children.indexOf(t);if(null==r)return null;e++,t=r}while(0===n&&void 0!==t.parent&&null!==t.parent);let i=new o;for(let t=0;t<n;++t)i.children.push(r.children[t]);let a=[i],d=[];for(;e&&a.length;){for(let t=0;t<a.length;++t)for(let e of a[t].children.reverse())d.push(e);a=d,d=[],--e}return 0==e?a[0]:null}function d(t,e,r,n,i){t.beginPath(),t.arc(r,n,i,0,2*Math.PI),t.stroke(),e.algo_node.algo.forwardedActiveNode===e.algo_node&&(t.save(),t.fillStyle="blue",t.beginPath(),t.arc(r,n,i,0,2*Math.PI),t.fill(),t.restore()),e.x=r,e.y=n,t.font=i+"px serif"}function s(t,e,r,n,i){let o=e.parent.x,a=e.parent.y,d=r,s=n,h=d-o,l=s-a,c=Math.atan(l/h);t.beginPath(),t.moveTo(o+i*Math.cos(c),a+i*Math.sin(c)),t.lineTo(d-i*Math.cos(c),s-i*Math.sin(c)),t.stroke(),t.translate(o,a),t.rotate(c),t.font=2*h/e.edgeInfo()+"px serif";let u=e.edgeInfo();if(e.algo_node.algo.forwardedActiveNode===e.parent.algo_node&&e.parent.algo_node.getChild(e.algo_node.algo.forwardedCurrentBranch)===e.algo_node&&-1!==e.algo_node.algo.forwardedCurrentBranch){let t=e.algo_node.algo.globalIndex-e.algo_node.algo.forwardedCurrentBranch;u=e.edgeInfo().substring(0,t+1)+"|"+e.edgeInfo().substring(t+1)}t.fillText(u,h/3,-5),t.rotate(-c),t.translate(-o,-a)}function h(t,e,r,n){let i=e.x,o=e.y,a=r.x,d=r.y,s=a-i,h=d-o,l=Math.atan(h/s);s<0&&(l=Math.PI+l),t.save(),t.strokeStyle="blue",t.beginPath(),t.moveTo(i+n*Math.cos(l),o+n*Math.sin(l)),t.lineTo(a-n*Math.cos(l),d-n*Math.sin(l));t.lineTo(a-n*Math.cos(l)-n*Math.cos(l+.2),d-n*Math.sin(l)-n*Math.sin(l+.2)),t.moveTo(a-n*Math.cos(l),d-n*Math.sin(l)),t.lineTo(a-n*Math.cos(l)-n*Math.cos(l-.2),d-n*Math.sin(l)-n*Math.sin(l-.2)),t.stroke(),t.restore()}class l{constructor(t){this.root=t}getNodesInLevels(){let t=[this.root],e=[],r=[[this.root]];for(;t.length;){for(let r of t)e.push(...r.children);r.push(e),t=e,e=[]}return r}__print_impl(t,e){for(let r of t.children)__print_impl(r,e+1)}print(){__print_impl(this.root,0)}draw(t,e,r){void 0===e&&(e=d),void 0===r&&(r=s);let n=this.getNodesInLevels(),i=t.getContext("2d");i.clearRect(0,0,t.width,t.height);let o=t.width/(n.length+1),l=o,c=Math.min(o/10,t.width/10,20);i.fillStyle="red",e(i,this.root,l,t.height/2,c),this.root.x=o,this.root.y=t.height/2;for(let d of n.slice(1,n.length)){l+=o;let n,s,h=t.height/(d.length+1),u=0;for(let o of d){if(o.parent.children[0]===o){n=o.parent.children.length;let e=o.parent.y-.5*(n+1)*h-t.height/2;s=t.height/2+.7*e,u=1;let r=a(o);r&&(s=Math.max(s,r.y))}let d=u*h*.7;e(i,o,l,s+d,c),r(i,o,l,s+d,c),u++}}for(let t of n.slice(1,n.length))for(let e of t)e.algo_node.suffixRef!==this.root.algo_node&&void 0!==e.algo_node.suffixRef&&h(i,e,e.algo_node.suffixRef.__graph_node,c)}}function c(t){let e=new l;return e.root=function t(e,r,n=null){let i=new o;i.algo_node=e,e.__graph_node=i,i.algo=r,i.parent=n,i.name="",i.x=-1,i.y=-1;for(let n of e.letterToChild.values())i.addChild(t(n,r,i));return i}(t.root,t),e}class u{constructor(t,e,r){this.parent=e,this.begin=r,this.end=-1,this.algo=t,this.letterToChild=new Map,this.suffixRef=t.root,this.letter=this.algo.text[this.begin],this.subtext=this.nodeText()}addChild(t){this.letterToChild.set(this.algo.text[t.begin],t)}text(){return this.algo.text}has(t){return this.letterToChild.has(t)}nodeText(){return this.algo.text.slice(this.begin,this.last_letter_index()+1)}last_letter_index(){return-1===this.end?this.text().length-1:this.end}getChild(t){return"string"==typeof t?this.letterToChild.get(t):"number"==typeof t?this.letterToChild.get(this.algo.text[t]):void 0}length(){if(-1===this.begin)return 0;return this.last_letter_index()+1-this.begin}getLocalIndex(){return this.algo.globalIndex-this.begin}childrenAmount(){return this.letterToChild.size}getBeginIndex(){return this.begin}isLeaf(){return-1===this.end}}class f{constructor(){this.text="",this.root=new u(this,-1,-1),this.root.parent=this.root,this.root.suffixRef=this.root,this.activeNode=this.root,this.remaining=0,this.currentBranch=-1,this.globalIndex=-1,this.lastCreatedNode=this.root,this.retValues={proceed:0,stop:1},this.restoreCommands=[],this.expansionIndex=-1}localIndex(){return-1===this.globalIndex?-1:this.globalIndex-this.forwardedCurrentBranch}getNextLetter(){let t=this.forwardedActiveNode.getChild(this.forwardedCurrentBranch).begin+(this.globalIndex-this.forwardedCurrentBranch)+1;return this.text[t]}setNoneCurrentBranch(){this.currentBranch=-1,this.globalIndex=-1}forwardActiveNode(){if(this.forwardedActiveNode=this.activeNode,this.forwardedCurrentBranch=this.currentBranch,this.activeNode.getChild(this.forwardedCurrentBranch)){let t=this.activeNode.getChild(this.forwardedCurrentBranch);for(;this.localIndex()>t.length()-1;){this.forwardedActiveNode=t;this.forwardedActiveNode.getChild(this.forwardedCurrentBranch+t.length());this.forwardedCurrentBranch+=t.length(),t=this.forwardedActiveNode.getChild(this.forwardedCurrentBranch)}this.localIndex()===t.length()-1&&(this.forwardedActiveNode=t,this.forwardedCurrentBranch=-1)}}expand_once(){let t=this.text.length-1,e=this.text[t];if(this.prevStateData={activeNode:this.activeNode,currentBranch:this.currentBranch,remaining:this.prevRemaining,text:this.prevText,globalIndex:this.globalIndex,lastCreatedNode:this.lastCreatedNode,expansionIndex:this.expansionIndex,doBaseRestore:function(t){t.activeNode=this.activeNode,t.currentBranch=this.currentBranch,t.remaining=this.remaining,t.text=this.text,t.globalIndex=this.globalIndex,t.lastCreatedNode=this.lastCreatedNode,t.expansionIndex=this.expansionIndex},doAdvancedRestore:function(t){},doRestore:function(t){this.doAdvancedRestore(t),this.doBaseRestore(t),t.forwardActiveNode()}},this.forwardActiveNode(),-1===this.forwardedCurrentBranch&&!this.forwardedActiveNode.has(e)){let e=new u(this,this.forwardedActiveNode,t);return this.forwardedActiveNode.addChild(e),this.prevStateData.removedLetter=this.text[t],this.prevStateData.removedIndex=this.text[t],this.prevStateData.doAdvancedRestore=function(t){this.activeNode.letterToChild.delete(this.removedLetter)},this.remaining--,this.activeNode=this.forwardedActiveNode.suffixRef,this.currentBranch=-1,this.expansionIndex++,this.retValues.proceed}if(-1===this.forwardedCurrentBranch&&void 0!==this.forwardedActiveNode.getChild(e))return this.activeNode=this.forwardedActiveNode,this.currentBranch=t,this.globalIndex=this.currentBranch,this.retValues.stop;if(-1!==this.forwardedCurrentBranch&&this.getNextLetter()===e)return this.globalIndex++,this.retValues.stop;if(-1!==this.forwardedCurrentBranch&&this.getNextLetter()!==e){let t=this.forwardedActiveNode.getChild(this.forwardedCurrentBranch),e=t.end;t.end=t.begin+this.localIndex();let r=new u(this,t,t.end+1);r.end=e,r.suffixRef=t.suffixRef,t.suffixRef=this.root,r.letterToChild=t.letterToChild,t.letterToChild=new Map;let n=new u(this,t,this.text.length-1);if(t.addChild(n),t.addChild(r),this.prevStateData.parent=this.activeNode,this.prevStateData.splitBranch=t,this.prevStateData.continuationNode=r,this.prevStateData.doAdvancedRestore=function(t){this.splitBranch.letterToChild=this.continuationNode.letterToChild,this.splitBranch.end=this.continuationNode.end,this.splitBranch.suffixRef=t.root},this.lastCreatedNode!==this.root&&(this.lastCreatedNode.suffixRef=t),this.lastCreatedNode=t,this.expansionIndex++,this.forwardedActiveNode.suffixRef!=this.root)this.activeNode=this.forwardedActiveNode.suffixRef;else{let t=this.activeNode.getChild(this.currentBranch).begin+1;if(this.forwardedActiveNode.getChild(this.forwardedCurrentBranch+1)===this.forwardedActiveNode.getChild(this.forwardedCurrentBranch)){let t=this.text.substring(this.expansionIndex+1,this.text.length-1),[e,r]=function(t,e){let r=t,n=-1;for(let t of e)if(n+1>=r.length()||-1===n){if(void 0===(r=r.getChild(t)))throw"for suffix '"+e+"' there is no path";n=0}else{if(t!==r.nodeText()[n+1])throw"for suffix '"+e+"' there is no path";++n}return[r,n]}(this.root,t);this.activeNode=e.parent,-1===r?(this.currentBranch=-1,this.globalIndex=-1):(this.currentBranch=e.begin,this.globalIndex=e.begin+r)}else this.activeNode.getChild(t)?this.currentBranch++:this.activeNode=this.activeNode.suffixRef}return this.globalIndex<this.currentBranch&&(this.currentBranch=-1),this.remaining--,this.retValues.proceed}}add_letter(t){for(this.prevText=this.text,this.prevRemaining=this.remaining,this.remaining++,this.text+=t,this.lastCreatedNode=this.root;;){let e=this.expand_once(t);if(this.restoreCommands.push(this.prevStateData),0===this.remaining||e===this.retValues.stop)return;this.prevText=this.text,this.prevRemaining=this.remaining}}doStepBack(){this.restoreCommands.pop().doRestore(this)}getGlobalIndex(){return this.globalIndex}getCurrentBranchBeginIndex(){return this.activeNode.getChild(this.currentBranch).begin}}let g=new f,x=g.root,p=new o,w=new l(p),v=document.querySelector("canvas");v.width=window.innerWidth,v.height=window.innerHeight;let _=0,C=!0;window.stack=[],window.text="",window.restartAnimation=function(){g=new f,x=g.root,p=new o,x.__graph_node=p,p.algo_node=x,(w=c(g)).draw(v),_=0;window.stack=[],window.text=""},window.start_algo=function(){window.restartAnimation();let t=document.querySelector("#algo_input");window.text=t.value+"$",document.querySelector("#appendButton").disabled=!1},window.append_letter=function(){g.prevText=g.text,g.prevRemaining=g.remaining,window.stack.push([_,C]);let t=window.text[_];if(C&&(g.text+=window.text[_],C=!1,g.lastCreatedNode=g.root,g.remaining++),g.expand_once(t)!==g.retValues.stop&&0!==g.remaining||(++_,C=!0),g.restoreCommands.push(g.prevStateData),g.forwardActiveNode(),(w=c(g)).draw(v),document.querySelector("#var-remainder").textContent=g.remaining,document.querySelector("#var-text-progress").textContent=g.text.substring(0,g.expansionIndex+1)+" | "+g.text.substring(g.expansionIndex+1),_===window.text.length){document.querySelector("#appendButton").disabled=!0}document.querySelector("#prevStateButton").disabled=!1},window.set_previous_state=function(){let t=window.stack.pop();if(g.doStepBack(),w=c(g),_=t[0],C=t[1],0==g.restoreCommands.length){document.querySelector("#prevStateButton").disabled=!0}document.querySelector("#appendButton").disabled=!1,w.draw(v),document.querySelector("#var-remainder").textContent=g.remaining,document.querySelector("#var-text-progress").textContent=g.text.substring(0,g.expansionIndex+1)+" | "+g.text.substring(g.expansionIndex+1)}}]);